/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(t,e,i,n){"use strict";function s(t,e,i){return setTimeout(c(t,i),e)}function o(t,e,i){return!!Array.isArray(t)&&(r(t,i[e],i),!0)}function r(t,e,i){var s;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(s=0;s<t.length;)e.call(i,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(i,t[s],s,t)}function a(e,i,n){var s="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=t.console&&(t.console.warn||t.console.log);return o&&o.call(t.console,s,n),e.apply(this,arguments)}}function l(t,e,i){var n,s=e.prototype;(n=t.prototype=Object.create(s)).constructor=t,n._super=s,i&&ht(n,i)}function c(t,e){return function(){return t.apply(e,arguments)}}function u(t,e){return typeof t==dt?t.apply(e?e[0]||n:n,e):t}function h(t,e){return t===n?e:t}function p(t,e,i){r(m(e),function(e){t.addEventListener(e,i,!1)})}function f(t,e,i){r(m(e),function(e){t.removeEventListener(e,i,!1)})}function d(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function m(t){return t.trim().split(/\s+/g)}function v(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function T(t,e,i){for(var n=[],s=[],o=0;o<t.length;){var r=e?t[o][e]:t[o];v(s,r)<0&&n.push(t[o]),s[o]=r,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function _(t,e){for(var i,s,o=e[0].toUpperCase()+e.slice(1),r=0;r<pt.length;){if(i=pt[r],(s=i?i+o:e)in t)return s;r++}return n}function b(){return _t++}function w(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}function E(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){u(t.options.enable,[t])&&i.handler(e)},this.init()}function C(t){var e=t.options.inputClass;return new(e||(Et?q:Ct?L:wt?j:z))(t,$)}function $(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Ot&&n-s==0,r=e&(kt|Pt)&&n-s==0;i.isFirst=!!o,i.isFinal=!!r,o&&(t.session={}),i.eventType=e,I(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function I(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=D(e)),s>1&&!i.firstMultiple?i.firstMultiple=D(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,r=i.firstMultiple,a=r?r.center:o.center,l=e.center=O(n);e.timeStamp=vt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=M(a,l),e.distance=P(a,l),x(i,e),e.offsetDirection=k(e.deltaX,e.deltaY);var c=S(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=mt(c.x)>mt(c.y)?c.x:c.y,e.scale=r?N(r.pointers,n):1,e.rotation=r?R(r.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,A(i,e);var u=t.element;d(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function x(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Ot&&o.eventType!==kt||(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}function A(t,e){var i,s,o,r,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=Pt&&(l>Dt||a.velocity===n)){var c=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,h=S(l,c,u);s=h.x,o=h.y,i=mt(h.x)>mt(h.y)?h.x:h.y,r=k(c,u),t.lastInterval=e}else i=a.velocity,s=a.velocityX,o=a.velocityY,r=a.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=r}function D(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:gt(t.pointers[i].clientX),clientY:gt(t.pointers[i].clientY)},i++;return{timeStamp:vt(),pointers:e,center:O(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O(t){var e=t.length;if(1===e)return{x:gt(t[0].clientX),y:gt(t[0].clientY)};for(var i=0,n=0,s=0;e>s;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:gt(i/e),y:gt(n/e)}}function S(t,e,i){return{x:e/t||0,y:i/t||0}}function k(t,e){return t===e?Mt:mt(t)>=mt(e)?0>t?Rt:Nt:0>e?zt:qt}function P(t,e,i){i||(i=Ht);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function M(t,e,i){i||(i=Ht);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}function R(t,e){return M(e[1],e[0],jt)+M(t[1],t[0],jt)}function N(t,e){return P(e[0],e[1],jt)/P(t[0],t[1],jt)}function z(){this.evEl=Wt,this.evWin=Bt,this.pressed=!1,E.apply(this,arguments)}function q(){this.evEl=Gt,this.evWin=Zt,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function X(){this.evTarget=Kt,this.evWin=Qt,this.started=!1,E.apply(this,arguments)}function Y(t,e){var i=y(t.touches),n=y(t.changedTouches);return e&(kt|Pt)&&(i=T(i.concat(n),"identifier",!0)),[i,n]}function L(){this.evTarget=ee,this.targetIds={},E.apply(this,arguments)}function H(t,e){var i=y(t.touches),n=this.targetIds;if(e&(Ot|St)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,o,r=y(t.changedTouches),a=[],l=this.target;if(o=i.filter(function(t){return d(t.target,l)}),e===Ot)for(s=0;s<o.length;)n[o[s].identifier]=!0,s++;for(s=0;s<r.length;)n[r[s].identifier]&&a.push(r[s]),e&(kt|Pt)&&delete n[r[s].identifier],s++;return a.length?[T(o.concat(a),"identifier",!0),a]:void 0}function j(){E.apply(this,arguments);var t=c(this.handler,this);this.touch=new L(this.manager,t),this.mouse=new z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function F(t,e){t&Ot?(this.primaryTouch=e.changedPointers[0].identifier,W.call(this,e)):t&(kt|Pt)&&W.call(this,e)}function W(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,s=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(s,ie)}}function B(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n],o=Math.abs(e-s.x),r=Math.abs(i-s.y);if(ne>=o&&ne>=r)return!0}return!1}function U(t,e){this.manager=t,this.set(e)}function V(t){if(g(t,ce))return ce;var e=g(t,ue),i=g(t,he);return e&&i?ce:e||i?e?ue:he:g(t,le)?le:ae}function G(){if(!oe)return!1;var e={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!i||t.CSS.supports("touch-action",n)}),e}function Z(t){this.options=ht({},this.defaults,t||{}),this.id=b(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=fe,this.simultaneous={},this.requireFail=[]}function J(t){return t&ye?"cancel":t&me?"end":t&ge?"move":t&de?"start":""}function K(t){return t==qt?"down":t==zt?"up":t==Rt?"left":t==Nt?"right":""}function Q(t,e){var i=e.manager;return i?i.get(t):t}function tt(){Z.apply(this,arguments)}function et(){tt.apply(this,arguments),this.pX=null,this.pY=null}function it(){tt.apply(this,arguments)}function nt(){Z.apply(this,arguments),this._timer=null,this._input=null}function st(){tt.apply(this,arguments)}function ot(){tt.apply(this,arguments)}function rt(){Z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function at(t,e){return e=e||{},e.recognizers=h(e.recognizers,at.defaults.preset),new lt(t,e)}function lt(t,e){this.options=ht({},at.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new U(this,this.options.touchAction),ct(this,!0),r(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ct(t,e){var i=t.element;if(i.style){var n;r(t.options.cssProps,function(s,o){n=_(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=s):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function ut(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var ht,pt=["","webkit","Moz","MS","ms","o"],ft=e.createElement("div"),dt="function",gt=Math.round,mt=Math.abs,vt=Date.now;ht="function"!=typeof Object.assign?function(t){if(t===n||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(s!==n&&null!==s)for(var o in s)s.hasOwnProperty(o)&&(e[o]=s[o])}return e}:Object.assign;var yt=a(function(t,e,i){for(var s=Object.keys(e),o=0;o<s.length;)(!i||i&&t[s[o]]===n)&&(t[s[o]]=e[s[o]]),o++;return t},"extend","Use `assign`."),Tt=a(function(t,e){return yt(t,e,!0)},"merge","Use `assign`."),_t=1,bt=/mobile|tablet|ip(ad|hone|od)|android/i,wt="ontouchstart"in t,Et=_(t,"PointerEvent")!==n,Ct=wt&&bt.test(navigator.userAgent),$t="touch",It="pen",xt="mouse",At="kinect",Dt=25,Ot=1,St=2,kt=4,Pt=8,Mt=1,Rt=2,Nt=4,zt=8,qt=16,Xt=Rt|Nt,Yt=zt|qt,Lt=Xt|Yt,Ht=["x","y"],jt=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(w(this.element),this.evWin,this.domHandler)}};var Ft={mousedown:Ot,mousemove:St,mouseup:kt},Wt="mousedown",Bt="mousemove mouseup";l(z,E,{handler:function(t){var e=Ft[t.type];e&Ot&&0===t.button&&(this.pressed=!0),e&St&&1!==t.which&&(e=kt),this.pressed&&(e&kt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:xt,srcEvent:t}))}});var Ut={pointerdown:Ot,pointermove:St,pointerup:kt,pointercancel:Pt,pointerout:Pt},Vt={2:$t,3:It,4:xt,5:At},Gt="pointerdown",Zt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Gt="MSPointerDown",Zt="MSPointerMove MSPointerUp MSPointerCancel"),l(q,E,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=Ut[n],o=Vt[t.pointerType]||t.pointerType,r=o==$t,a=v(e,t.pointerId,"pointerId");s&Ot&&(0===t.button||r)?0>a&&(e.push(t),a=e.length-1):s&(kt|Pt)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var Jt={touchstart:Ot,touchmove:St,touchend:kt,touchcancel:Pt},Kt="touchstart",Qt="touchstart touchmove touchend touchcancel";l(X,E,{handler:function(t){var e=Jt[t.type];if(e===Ot&&(this.started=!0),this.started){var i=Y.call(this,t,e);e&(kt|Pt)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:$t,srcEvent:t})}}});var te={touchstart:Ot,touchmove:St,touchend:kt,touchcancel:Pt},ee="touchstart touchmove touchend touchcancel";l(L,E,{handler:function(t){var e=te[t.type],i=H.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:$t,srcEvent:t})}});var ie=2500,ne=25;l(j,E,{handler:function(t,e,i){var n=i.pointerType==$t,s=i.pointerType==xt;if(!(s&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)F.call(this,e,i);else if(s&&B.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var se=_(ft.style,"touchAction"),oe=se!==n,re="compute",ae="auto",le="manipulation",ce="none",ue="pan-x",he="pan-y",pe=G();U.prototype={set:function(t){t==re&&(t=this.compute()),oe&&this.manager.element.style&&pe[t]&&(this.manager.element.style[se]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return r(this.manager.recognizers,function(e){u(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),V(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;{if(!this.manager.session.prevented){var n=this.actions,s=g(n,ce)&&!pe[ce],o=g(n,he)&&!pe[he],r=g(n,ue)&&!pe[ue];if(s){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}return r&&o?void 0:s||o&&i&Xt||r&&i&Yt?this.preventSrc(e):void 0}e.preventDefault()}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var fe=1,de=2,ge=4,me=8,ve=me,ye=16,Te=32;Z.prototype={defaults:{},set:function(t){return ht(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Q(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=Q(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=Q(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=Q(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;me>n&&e(i.options.event+J(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=me&&e(i.options.event+J(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=Te)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Te|fe)))return!1;t++}return!0},recognize:function(t){var e=ht({},t);return u(this.options.enable,[this,e])?(this.state&(ve|ye|Te)&&(this.state=fe),this.state=this.process(e),void(this.state&(de|ge|me|ye)&&this.tryEmit(e))):(this.reset(),void(this.state=Te))},process:function(t){},getTouchAction:function(){},reset:function(){}},l(tt,Z,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(de|ge),s=this.attrTest(t);return n&&(i&Pt||!s)?e|ye:n||s?i&kt?e|me:e&de?e|ge:de:Te}}),l(et,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Lt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Xt&&e.push(he),t&Yt&&e.push(ue),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,o=t.deltaX,r=t.deltaY;return s&e.direction||(e.direction&Xt?(s=0===o?Mt:0>o?Rt:Nt,i=o!=this.pX,n=Math.abs(t.deltaX)):(s=0===r?Mt:0>r?zt:qt,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return tt.prototype.attrTest.call(this,t)&&(this.state&de||!(this.state&de)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=K(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(it,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&de)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(nt,Z,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(kt|Pt)&&!o)this.reset();else if(t.eventType&Ot)this.reset(),this._timer=s(function(){this.state=ve,this.tryEmit()},e.time,this);else if(t.eventType&kt)return ve;return Te},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ve&&(t&&t.eventType&kt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=vt(),this.manager.emit(this.options.event,this._input)))}}),l(st,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ce]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&de)}}),l(ot,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Xt|Yt,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Xt|Yt)?e=t.overallVelocity:i&Xt?e=t.overallVelocityX:i&Yt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&mt(e)>this.options.velocity&&t.eventType&kt},emit:function(t){var e=K(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(rt,Z,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Ot&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=kt)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||P(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ve,this.tryEmit()},e.interval,this),de):ve}return Te},failTimeout:function(){return this._timer=s(function(){this.state=Te},this.options.interval,this),Te},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ve&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),at.VERSION="2.0.8",at.defaults={domEvents:!1,touchAction:re,enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[it,{enable:!1},["rotate"]],[ot,{direction:Xt}],[et,{direction:Xt},["swipe"]],[rt],[rt,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var _e=1,be=2;lt.prototype={set:function(t){return ht(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?be:_e},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&ve)&&(s=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],e.stopped===be||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&i.state&(de|ge|me)&&(s=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Z)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=v(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==n&&e!==n){var i=this.handlers;return r(m(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==n){var i=this.handlers;return r(m(t),function(t){e?i[t]&&i[t].splice(v(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&ut(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ct(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ht(at,{INPUT_START:Ot,INPUT_MOVE:St,INPUT_END:kt,INPUT_CANCEL:Pt,STATE_POSSIBLE:fe,STATE_BEGAN:de,STATE_CHANGED:ge,STATE_ENDED:me,STATE_RECOGNIZED:ve,STATE_CANCELLED:ye,STATE_FAILED:Te,DIRECTION_NONE:Mt,DIRECTION_LEFT:Rt,DIRECTION_RIGHT:Nt,DIRECTION_UP:zt,DIRECTION_DOWN:qt,DIRECTION_HORIZONTAL:Xt,DIRECTION_VERTICAL:Yt,DIRECTION_ALL:Lt,Manager:lt,Input:E,TouchAction:U,TouchInput:L,MouseInput:z,PointerEventInput:q,TouchMouseInput:j,SingleTouchInput:X,Recognizer:Z,AttrRecognizer:tt,Tap:rt,Pan:et,Swipe:ot,Pinch:it,Rotate:st,Press:nt,on:p,off:f,each:r,merge:Tt,extend:yt,assign:ht,inherit:l,bindFn:c,prefixed:_}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=at,"function"==typeof define&&define.amd?define(function(){return at}):"undefined"!=typeof module&&module.exports?module.exports=at:t[i]=at}(window,document,"Hammer");var currentState=history.state,building_path=["store-taipei","taipei_city","future-experience","extraction","greenhouse_alishan","greenhouse_tainan","airport","laboratory","factory","north_solar","alishan-mountain","alishan-wood"],pathArray=window.location.pathname.split("/"),stateObj={page:"./"};if(history.pushState(stateObj,"page","./"),"./"==stateObj.page&&pathArray[pathArray.length-1]){var flag=!0;(flag=building_path.indexOf(pathArray[pathArray.length-1])>-1)?(history.pushState(stateObj,"page",pathArray[pathArray.length-1]),stateObj.page=pathArray[pathArray.length-1]):history.pushState(stateObj,"page","./")}"./"!=stateObj.page||pathArray[pathArray.length-1]||$(".intro").slideDown(300),$(document).ready(function(){function t(){var t=parseInt(h.css("margin-left"),10)+parseInt(h.css("margin-right"),10);p.scrollTop((h.outerHeight()-d)/2),p.scrollLeft((h.outerWidth()+t-f)/2)}function e(){history.pushState(stateObj,"page","./")}function i(){$("#layer").slideUp(400),$(".iso-map, .map-header, .building-block, .building-block > svg, .building-box, .component-sign, .sign").stop().removeClass("active").removeClass("inside").removeClass("inside-right"),$(".building-block > svg, .building-box").removeClass("inside").removeClass("inside-right"),$(".article > li").stop().hide(),$(".component-content > li").slideUp(300),b.get("pan").set({enable:!0}),$(".building-component").children().removeClass("active"),$(".timeline-item > li").removeClass("active").removeClass("now"),_=0,clearTimeout(c),clearInterval(c),c=null,u=null}function n(t){if(_<=t)for(e=_;e<=t;e++){i=250*(e-_);$(".timeline-item > li").eq(e).stop().delay(i).queue(function(t){$(this).addClass("active"),t()}),e==t&&$(".timeline-item > li").removeClass("now").eq(e).addClass("now")}else for(var e=_;e>t;e--){var i=250*(_-e);$(".timeline-item > li").eq(e).stop().delay(i).queue(function(t){$(this).removeClass("active"),t()}),e==t+1&&$(".timeline-item > li").removeClass("now").eq(e-1).addClass("now")}_=t}function s(){var t=TweenMax,e=document.getElementById("fill-line").getElementsByTagName("path");(e=[].slice.call(e)).forEach(function(t,e){var i=Math.ceil(t.getTotalLength());t._len=i,t.style.strokeDasharray=i,t.style.strokeDashoffset=i}),e.forEach(function(e,i){t.to(e,0,{strokeDashoffset:e._len})})}function o(){var t=TweenMax,e=document.getElementById("fill-line").getElementsByTagName("path");(e=[].slice.call(e)).forEach(function(t,e){var i=Math.ceil(t.getTotalLength());t._len=i,t.style.strokeDasharray=i,t.style.strokeDashoffset=i}),e.forEach(function(e,i){t.to(e,0,{strokeDashoffset:e._len})}),t.to(e[0],3,{strokeDashoffset:0,onComplete:function(){t.to(e[1],2,{strokeDashoffset:0,onComplete:function(){t.to(e[2],4,{strokeDashoffset:0,onComplete:function(){setTimeout(function(){o()},3e3)}})}})}})}var r,a,l,c,u,h=$(".iso-map"),p=$("#wraper"),f=$(window).width(),d=$(window).height(),g=[{title:"store-taipei",name:"台北概念店",url:"./images/store_taipei.svg",top:500,left:1520,top_focus:493,left_focus:1580,width:240,sign_pos:{left:"40%",top:"20%"},animate_class:[".man-store"],content:"台北概念店於2015創立至今，在2017年於台北的概念店成立並開幕，為我們的旅程揭開了新的一章。",inside:!0,component:[{title:"體驗區",direction:"lefttop",position:{left:"40%",top:"48%"},content:"體驗區設有體驗桌椅，能讓顧客舒適地接觸我們的產品，感受高山蘭花所帶來的功效。"},{title:"展售區",direction:"righttop",position:{left:"80%",top:"28%"},content:"為了突出產品帶來的自然色澤，採用特別訂製的陳列櫃，搭配設計的燈光，讓顧客能感受新鮮、高貴的氣息。"}]},{title:"taipei_city",name:"臺灣臺北",url:"./images/taipei_city.svg",inside:!1,top:55,left:1585,top_focus:55,left_focus:1600,width:500,sign_pos:{left:"56%",top:"47%"},content:"生機勃勃的臺北市，就如同蝴蝶蘭般，是我們開始發光發亮的起點。"},{title:"future-experience",name:"未來體驗館",url:"./images/future_experience.svg",top:1075,left:2430,top_focus:1075,left_focus:2507,width:290,sign_pos:{left:"90%",top:"20%"},content:"我們期望在阿里山上，能夠讓顧客體驗只屬於阿里山的自然，她的陽光、空氣、水，而這將會在我們的規劃當中"},{title:"extraction",name:"萃取廠",url:"./images/extraction.svg",inside:!0,top:1680,left:1640,top_focus:1680,left_focus:1700,width:320,sign_pos:{left:"50%",top:"10%"},content:"新鮮的高山蘭花會運送到此，萃取出營養成分極高的原液。",animate_class:["#extraction-tube"],component:[{title:"新鮮蘭花",direction:"lefttop",position:{left:"58%",top:"51%"},content:"阿里山上綻放的大白蝴蝶蘭和紅蝴蝶蘭，富含多酚類、花青素、多醣體及天然維生素B、C、E，並且透過複製技術，確保每一朵、每一瓣都能夠萃取出相同且高效的成分。<img class='content-img' src='https://picsum.photos/600/400?image=830'/>"},{title:"萃取系統",direction:"righttop",position:{left:"69%",top:"43%"},content:"高科技的萃取系統，提煉出每一朵蝴蝶蘭的精華，而這蜜桃般的粉紅色，正是精華所在的最佳證明。<img class='content-img' src='https://picsum.photos/600/400?image=798'/>"}]},{title:"greenhouse_alishan",name:"阿里山溫室",url:"./images/greenhouse_alishan.png",inside:!0,top:900,left:2140,top_focus:900,left_focus:2140,width:420,sign_pos:{left:"50%",top:"10%"},content:"成熟蘭苗送到海拔2000公尺的阿里山溫室，進行抽梗和催花，伴隨著阿里山的陽光、空氣、水，到達最重要的階段－－開花。",images:[{class:"buildinginside",url:"./images/greenhouse_alishan_inside.png"},{class:"shadow",url:"./images/greenhouse_alishan_shadow.png"},{class:"alishan-flower-1",url:"./images/greenhouse_alishan_flower.png"},{class:"alishan-flower-2",url:"./images/greenhouse_alishan_flower.png"},{class:"alishan-flower-3",url:"./images/greenhouse_alishan_flower.png"},{class:"alishan-flower-4",url:"./images/greenhouse_alishan_flower.png"},{class:"building-outside",url:"./images/greenhouse_alishan.png"}]},{title:"greenhouse_tainan",name:"台南溫室",url:"./images/greenhouse_tainan.png",inside:!0,top:1580,left:560,top_focus:1500,left_focus:560,width:500,sign_pos:{left:"45%",top:"5%"},content:"我們的起點，是位於台南的蘭苗溫室，透過高科技的設備和技術，培育出健康且優質的種苗，隨後便運送到阿里出進行最為重要的流程。",component:[{title:"智能調節系統",direction:"lefttop",position:{left:"17%",top:"32%"},content:"在台南的溫室的每個工序，都是透過智能調節系統進行操作，確保每一株蘭苗都受到最好的照料。"},{title:"陽光調節系統",direction:"righttop",position:{left:"49%",top:"17%"},content:"在阿里山上能接受最直接的陽光，但強烈陽光所帶來溫度和亮度會對蘭花的開花有莫大的影響，因此智能系統會操作黑色的布幕過濾陽光，進行最合適的調節。"},{title:"水分調節系統",direction:"leftbottom",position:{left:"25%",top:"65%"},content:"蘭花以水草種植，當中的水分、濕度對蘭苗的成長有著舉足輕重的作用，水分調節系統皆由系統操作，確保水分達到最佳比例。"},{title:"瓶苗置放",direction:"lefttop",position:{left:"80%",top:"45%"},content:"瓶苗從植苗到出瓶，需要經歷時長18個月的置放成長，期間溫度會是最重要的因素，需要把溫度維持在18°C，瓶苗才能健康成長。"}],images:[{class:"shadow",url:"./images/greenhouse_tainan_shadow.png"},{class:"buildinginside",url:"./images/greenhouse_tainan_inside.png"},{class:"building-outside",url:"./images/greenhouse_tainan.png"}],svg:{class:"building-svg",url:"./images/greenhouse_tainan_component.svg"}},{title:"airport",name:"桃園機場",url:"./images/airport.svg",top:767,left:290,top_focus:767,left_focus:290,width:500,sign_pos:{left:"50%",top:"10%"},content:"我們希望把阿里山和新鮮的理念傳達至全世界。",animate_class:[".airplane"]},{title:"laboratory",name:"實驗室",url:"./images/laboratory.svg",inside:!0,top:1386,left:1243,top_focus:1406,left_focus:1376,width:380,sign_pos:{left:"60%",top:"15%"},content:"蘭花萃取後的原液，會來到實驗室，進行一系統的檢測和處理。",component:[{title:"萃取原液",direction:"lefttop",position:{left:"58%",top:"51%"},content:"色澤呈粉紅的萃取原液，會送往實驗室進行一系列嚴密的檢測。<img class='content-img' src='https://picsum.photos/600/400?image=997'/>"},{title:"檢測器材",direction:"righttop",position:{left:"69%",top:"43%"},content:"除了確保原料的功效品質，我們更重視產品的安全性，而實驗室的高科技器材可對萃取材料進行更有效的檢測。<img class='content-img' src='hhttps://picsum.photos/600/400?image=976'/>"},{title:"微生物檢測",direction:"leftbottom",position:{left:"72%",top:"64%"},content:"品牌的蘭花萃取液韵含極高的營養，非常適合微生物生長，為確保顧客能夠獲得最新鮮的保養，微生物的檢測是非常重要的步驟。<img class='content-img' src='https://picsum.photos/600/400?image=955'/>"},{title:"配方調整",direction:"rightbottom",position:{left:"80%",top:"57%"},content:"萃取液的新鮮功效顯著，而加上天然配方能令成品更進一步發揮功效。<img class='content-img' src='https://picsum.photos/600/400?image=940'/>"}]},{title:"factory",name:"GMP填充廠",url:"./images/factory.svg",inside:!1,top:585,left:948,top_focus:569,left_focus:1010,width:330,sign_pos:{left:"45%",top:"20%"},content:"在實驗室透過多重檢測後，會即時把原料送往填充廠誰行填充，確保新鮮能夠被鎖住，直到你把瓶子打開。"},{title:"north_solar",name:"北回歸線太陽館",url:"./images/north_solar.svg",inside:!1,top:1076,left:1111,top_focus:1009,left_focus:1057,width:400,sign_pos:{left:"35%",top:"20%"},content:"命中註定的北回歸線，命中註定的我們。"},{title:"alishan-wood",name:"阿里山神木",url:"./images/alishan-wood.png",top:864,left:1868,top_focus:849,left_focus:1868,width:175,sign_pos:{left:"55%",top:"20%"},content:"阿里山得天獨厚的氣候，孕育出只屬於阿里山的神木，同時也是品牌夠蓬勃成長的根。",images:[{class:"building-outside",url:"./images/alishan-wood.png"}],animate_class:[".godwood"]},{title:"alishan-mountain",name:"阿里山雲海日出",url:"./images/alishan-mountain2.svg",top:473,left:2061,top_focus:379,left_focus:2040,width:724,sign_pos:{left:"50%",top:"35%"},content:"阿里山的日出和雲海，沐浴了蝴蝶蘭，每一瓣花瓣都閃爍著阿里山的陽光。"}],m=!0,v=null,y=[],T=[5,4,3,7,8,0],_=0,b=new Hammer(p[0],{domEvents:!0});b.get("pan").set({direction:Hammer.DIRECTION_ALL}),$(".timeline-item > li").each(function(){$(this).attr("data-index",T[$(this).index()])}),$(".intro-close, .btn-close").click(function(t){$(".intro").slideUp(300)});for(var w=0;w<g.length;w++){var E=g[w],C=$("<div class='building-block'></div>"),I=$("<li></li>"),x=$("<li></li>"),A=$("<article></article>"),D=[];if(I.html("<h3>"+E.name+"</h3>"),$("#menu > ul").append(I),h.append(C),E.component)for(var O=0;O<E.component.length;O++)D.push("<li><h4>"+E.component[O].title+"</h4><p>"+E.component[O].content+"</p></li>");x.html("<h2>"+E.name+"</h2>"),A.html("<p>"+E.content+"</p><ul class='component-content'>"+D.join("")+"</ul>"),x.append(A),$("ul.article").append(x),function(t,e){$.get(t.url,function(c){function u(i){var n,c,i=i||$("#"+t.title);if($(".intro").slideUp(300),history.pushState(stateObj,"page 2",t.title),now_scale=1,f>=1400?(n=t.left_focus+1800-.5*f+i.children(".building-outside")[0].getBoundingClientRect().width/2-200,c=t.top_focus-.5*d+i.height()/2+400):f>=768?(n=t.left_focus+1800-.5*f+i.children(".building-outside")[0].getBoundingClientRect().width/2,c=t.top_focus-.5*d+i.height()/2+400):(n=t.left_focus+1800-.5*f+i.children(".building-outside")[0].getBoundingClientRect().width/2,c=t.top_focus-d+i.height()+550),console.log(i.height()),l=t,$(".map-header").addClass("active"),$("#menu>ul li").stop().removeClass("active").eq(e).addClass("active"),i.parents(".building-block").addClass("active"),t.animate_class&&f>=768)for(var u=0;u<t.animate_class.length;u++)$(t.animate_class[u]).addClass("active");b.get("pan").set({enable:!1}),p.scrollLeft()==Math.floor(n)&&p.scrollTop()==Math.floor(c)?h():p.stop().animate({scrollTop:c,scrollLeft:n},500,function(){h(),r=c,a=n}),s(),o()}function h(){var i=$("#"+t.title),s=i.parents(".building-block");i.stop().addClass("active"),t.inside&&(i.stop().addClass("inside"),i.stop().parent().addClass("inside")),$(".sign").addClass("active"),$("#layer").slideDown(400),$(".article > li").eq(e).delay(400).fadeIn(300),$(".close").delay(400).fadeIn(400);var o=T.indexOf(s.index(".building-block"));-1!=o?n(o):($(".timeline-item > li").removeClass("active").removeClass("now"),_=0)}var g=$("<div class='sign'></div>"),w=$(".building-block").eq(e);$("#"+t.title).parents(".building-block");if(g.html("<span>"+t.name+"</span>"),g.css({left:t.sign_pos.left,top:t.sign_pos.top}),w.append(g),-1!=t.url.indexOf(".svg"))w.append(c.getElementsByTagName("svg")[0]);else{for(var E=$("<div id='"+t.title+"' class='building-box'></div>"),C=0;C<t.images.length;C++){var I=$("<img/>");I.addClass(t.images[C].class).attr("src",t.images[C].url),E.append(I)}var x=$("<div id='"+t.title+"-outside' class='img-layer'></div>");E.append(x),t.svg&&$.get(t.svg.url,function(t){E.append(t.getElementsByTagName("svg")[0])}),w.append(E)}if(w.css({left:t.left,top:t.top,width:t.width}),y[e]=new Hammer(document.getElementById(t.title),{domEvents:!0}),y[e].get("pan").set({enable:!1}),t.component)for(C=0;C<t.component.length;C++){var A=t.component[C],D=$("<div class='component-sign'><span>"+A.title+"</span></div>");D.addClass(A.direction),f>=768?D.css({left:A.position.left,top:A.position.top}):D.css({left:parseInt(A.position.left)/1.5+"%",top:parseInt(A.position.top)/1.5+"%"}),w.append(D),D.click(function(e){var i,n,s=s||$("#"+t.title);i=t.left_focus-f+t.width/2+350+1800,s.parent().hasClass("inside-right")?n=t.top_focus-.5*d+s.height()/1.5/2+500:(n=t.top_focus-.5*d+s.height()/1.5/2/1.25+500,s.parent().addClass("inside-right"));var o=$(this).index(".component-sign");$(".component-content > li").fadeOut(300).eq(o).stop().delay(300).fadeIn(300),p.stop().animate({scrollTop:n,scrollLeft:i},500,function(){r=n,a=i})})}$("#menu > ul li:eq("+e+"), .timeline-item > li[data-index='"+e+"']").click(function(t){$(".building-block, .building-block > svg, .building-box").stop().removeClass("active").removeClass("inside").removeClass("inside-right"),$(".building-block > svg, .building-box").removeClass("inside").removeClass("inside-right"),$(".building-component").children().removeClass("active"),$(".article > li").hide(),u(),$("#menu").removeClass("active")}),stateObj.page==t.title&&(u(),h()),window.onpopstate=function(e){stateObj.page==t.title&&(i(),u(),h())},$("#"+t.title+"-outside").on("tap",function(t){m&&(m=!1,v=setTimeout(function(){m=!0},200),t.stopPropagation(),t.preventDefault(),u())}),$("#"+t.title).prev().on("tap",function(t){u()})})}(E,w)}t(),$("ul.article").css({"padding-right":p[0].offsetWidth-p[0].clientWidth,"padding-bottom":p[0].offsetHeight-p[0].clientHeight}),p.on("pan",function(t){t.originalEvent.preventDefault()}),p.on("panstart",function(t){t.originalEvent&&(r=p.scrollTop(),a=p.scrollLeft())}),p.on("panmove",function(t){if(t.originalEvent){var e=t.originalEvent.gesture;p.scrollTop(r-e.deltaY),p.scrollLeft(a-e.deltaX)}}),p.on("panend",function(t){t.originalEvent&&(r=p.scrollTop(),a=p.scrollLeft())}),$(window).on("keyup",function(t){27==t.keyCode&&(i(),e()),32==t.keyCode&&t.preventDefault()}),$(window).resize(function(t){if(f=$(window).width(),d=$(window).height(),l){var e=$("#"+l.title);l.left_focus,e.children(".building-outside")[0].getBoundingClientRect().width,l.top_focus,e.height()}});new Hammer($(".close")[0],{domEvents:!0});$(".close").on("click",function(){i(),e()}),$(".nav-icon").click(function(){$("nav#menu").toggleClass("active")})}),$(window).load(function(){$(".loading-page").fadeOut(500)});